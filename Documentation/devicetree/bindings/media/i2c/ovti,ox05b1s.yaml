# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
# Copyright 2024-2025 NXP
%YAML 1.2
---
$id: http://devicetree.org/schemas/media/i2c/ovti,ox05b1s.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Omnivision OX05B1S Image Sensor

maintainers:
  - Mirela Rabulea <mirela.rabulea@nxp.com>

description:
  The Omnivision OX05B1S is a 1/2.5-Inch CMOS image sensor with an active
  array size of 2592 x 1944 and raw RGB-Ir output. It is programmable through
  I2C interface. Image data is available via MIPI CSI-2 serial data output.
  The Omnivision OS08A20 is a 1/1.8-Inch CMOS image sensor with an active
  array size of 3840 x 2160, raw RGB output and 2-exposure staggered HDR
  support.

allOf:
  - $ref: /schemas/media/video-interface-devices.yaml#

properties:
  compatible:
    enum:
      - ovti,os08a20
      - ovti,ox05b1s

  reg:
    maxItems: 1

  clocks:
    description: Input clock (6-64 MHz for OX05B1S, 6-27 MHz for OS08A20)
    maxItems: 1

  reset-gpios:
    description: Active low XSHUTDOWN pin
    maxItems: 1

  avdd-supply:
    description: Power for analog circuit (2.8V)

  dovdd-supply:
    description: Power for I/O circuit (1.8V)

  dvdd-supply:
    description: Power for digital circuit (1.2V)

  port:
    $ref: /schemas/graph.yaml#/$defs/port-base
    unevaluatedProperties: false
    description: MIPI CSI-2 transmitter port

    properties:
      endpoint:
        $ref: /schemas/media/video-interfaces.yaml#
        unevaluatedProperties: false

        properties:
          data-lanes:
            anyOf:
              - items:
                  - const: 1
                  - const: 2
              - items:
                  - const: 1
                  - const: 2
                  - const: 3
                  - const: 4
        required:
          - data-lanes

    required:
      - endpoint

required:
  - compatible
  - reg
  - clocks
  - port
  - avdd-supply
  - dovdd-supply
  - dvdd-supply

unevaluatedProperties: false

examples:
  - |
    #include <dt-bindings/gpio/gpio.h>

    i2c {
        #address-cells = <1>;
        #size-cells = <0>;

        camera@36 {
            compatible = "ovti,ox05b1s";
            reg = <0x36>;
            clocks = <&ox05b1s_clk>;

            assigned-clocks = <&ox05b1s_clk>;
            assigned-clock-parents = <&ox05b1s_clk_parent>;
            assigned-clock-rates = <24000000>;

            reset-gpios = <&gpio1 6 GPIO_ACTIVE_LOW>;

            avdd-supply = <&camera_avdd_2v8>;
            dovdd-supply = <&camera_dovdd_1v8>;
            dvdd-supply = <&camera_dvdd_1v2>;

            orientation = <2>;
            rotation = <0>;

            port {
                ox05b1s_mipi_0_ep: endpoint {
                    remote-endpoint = <&mipi_csi0_ep>;
                    data-lanes = <1 2 3 4>;
                };
            };
        };
    };
...
